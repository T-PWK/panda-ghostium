mixin post(post)
    article.post-item(itemscope, itemtype="http://schema.org/BlogPosting", role="article", class=$postClass(post))

        header.post-item-header
            h2.post-item-title(itemprop="name"): a(href=$url(post), itemprop="url", data-pjax, title=post.title)= post.title

        section.post-item-excerpt(itemprop="description")
            p #{post.teaser} &hellip;

        footer.post-item-footer
            ul.post-item-meta-list

                //- Publication date
                li.post-item-meta-item
                    time(datetime=$date(post), itemprop="datePublished")= $date(post, 'timeago')
                
                //- Keywords
                if post.labels
                    li.post-item-meta-item
                        each label, idx in post.labels
                            span(itemprop= idx === 0 ? 'articleSection' : 'keywords')= label
                            | #{(idx === post.labels.length - 1) ? '' : ', '}
                
                //- Number of comments
                li.post-item-meta-item: a(href="#{$url(post)}#disqus_thread", data-pjax, data-disqus-identifier="{{id}}")

extends layout

block content
    aside.cover(role="banner")
        .cover-image(data-load-image=cover ? cover : undefined)
        .cover-container
            if logo
                a.cover-logo(href=url, data-pjax): img(src=logo, alt="Blog Logo")
            h1.cover-title= title
            p.cover-description= description

    section.wrapper(tabindex="0")
        .wrapper-container
            include featured

            section.post-list
                each post in posts
                    mixin post(post)

            if pagination
                nav.post-list-pagination(role="pagination")
                    if pagination.newer
                        a.post-list-pagination-item.post-list-pagination-item-prev(href= $pageUrl(true), data-pjax) 
                            i.fa.fa-angle-double-left 
                            |  Newer
                    span.post-list-pagination-item.post-list-pagination-item-current Page #{pagination.page} of #{pagination.pages}
                    if pagination.older
                        a.post-list-pagination-item.post-list-pagination-item-next(href= $pageUrl(false), data-pjax) 
                            | Older 
                            i.fa.fa-angle-double-right

            footer.footer(role="contentinfo")
                p: small Â© #{now.year()}. All Rights Reserved.
                p: small 
                    a(href="http://ghostium.oswaldoacauan.com/", target="_blank") Ghostium Theme
                    |  by 
                    a(href="http://twitter.com/oswaldoacauan", target="_blank") @oswaldoacauan
                p: small
                    | Proudly published with 
                    a(href="https://github.com/T-PWK/panda") Panda